<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì„ ë¦¬ë·° ëŒ“ê¸€ ì‘ì„± ë„ìš°ë¯¸</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600&family=Noto+Sans+JP:wght@400;600&family=Noto+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', 'Noto Sans JP', 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: #b8d4d3;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: #7fa39b;
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .language-selector {
            position: absolute;
            top: 20px;
            right: 30px;
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px;
            border-radius: 8px;
        }

        .language-btn {
            background: transparent;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .language-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .language-btn.active {
            background: white;
            color: #7fa39b;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .section h2 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h2::before {
            content: '';
            width: 4px;
            height: 20px;
            background: #7fa39b;
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 600;
            font-size: 14px;
        }

        input[type="text"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s;
        }

        input[type="text"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #7fa39b;
            box-shadow: 0 0 0 3px rgba(127, 163, 155, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .guidelines-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .guideline-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            display: flex;
            gap: 10px;
            align-items: start;
        }

        .guideline-item input {
            flex: 1;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }

        .remove-btn:hover {
            background: #c82333;
        }

        .add-btn {
            width: 100%;
            background: #8fb3ab;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .add-btn:hover {
            background: #7fa39b;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(127, 163, 155, 0.3);
        }

        .generate-btn {
            width: 100%;
            background: #7fa39b;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(127, 163, 155, 0.4);
            background: #6d8f88;
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #7fa39b;
            margin-top: 20px;
            white-space: pre-wrap;
            line-height: 1.8;
            min-height: 150px;
            color: #495057;
        }

        .result-box.empty {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #adb5bd;
            font-style: italic;
        }

        .copy-btn {
            width: 100%;
            background: #8fb3ab;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .copy-btn:hover {
            background: #7fa39b;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(127, 163, 155, 0.3);
        }

        .copy-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .rating-select {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .rating-option {
            flex: 1;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .rating-option:hover {
            border-color: #7fa39b;
        }

        .rating-option.active {
            border-color: #7fa39b;
            background: #7fa39b;
            color: white;
        }

        .loading {
            text-align: center;
            color: #7fa39b;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            .language-selector {
                position: static;
                margin-bottom: 15px;
                justify-content: center;
            }
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            color: #495057;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            border: 2px solid #7fa39b;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s;
            z-index: 1000;
            font-weight: 600;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="language-selector">
                <button class="language-btn active" onclick="changeLanguage('ko')" data-lang="ko">í•œêµ­ì–´</button>
                <button class="language-btn" onclick="changeLanguage('en')" data-lang="en">English</button>
                <button class="language-btn" onclick="changeLanguage('ja')" data-lang="ja">æ—¥æœ¬èª</button>
            </div>
            <h1 data-i18n="title">ğŸ“ ê²Œì„ ìŠ¤í† ì–´ ë¦¬ë·° ëŒ“ê¸€ ì‘ì„± ë„ìš°ë¯¸</h1>
            <p data-i18n="subtitle">ë¦¬ë·° ë‚´ìš©ê³¼ ì‘ì„± ê¸°ì¤€ì„ ì…ë ¥í•˜ë©´ ì ì ˆí•œ ëŒ“ê¸€ì„ ìë™ìœ¼ë¡œ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤</p>
        </div>

        <div class="content">
            <!-- ì™¼ìª½: ë¦¬ë·° ì •ë³´ ì…ë ¥ -->
            <div class="section">
                <h2 data-i18n="reviewInfo">ë¦¬ë·° ì •ë³´</h2>
                
                <div class="form-group">
                    <label data-i18n="rating">ë¦¬ë·° í‰ì </label>
                    <div class="rating-select">
                        <div class="rating-option" data-rating="5">â­â­â­â­â­</div>
                        <div class="rating-option" data-rating="4">â­â­â­â­</div>
                        <div class="rating-option" data-rating="3">â­â­â­</div>
                        <div class="rating-option" data-rating="2">â­â­</div>
                        <div class="rating-option" data-rating="1">â­</div>
                    </div>
                </div>

                <div class="form-group">
                    <label data-i18n="reviewContent">ë¦¬ë·° ë‚´ìš©</label>
                    <textarea id="reviewContent" data-i18n-placeholder="reviewContentPlaceholder"></textarea>
                </div>

                <div class="form-group">
                    <label data-i18n="gameNameRef">ê²Œì„ ëª… - ì°¸ê³ ìš© (ì„ íƒ)</label>
                    <input type="text" id="productName" data-i18n-placeholder="gameNameRefPlaceholder">
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ì‘ì„± ê¸°ì¤€ ì„¤ì • -->
            <div class="section">
                <h2 data-i18n="writingGuidelines">ì‘ì„± ê¸°ì¤€ ì„¤ì •</h2>
                
                <div class="form-group">
                    <label data-i18n="prefix">ë§ë¨¸ë¦¬ (ì„ íƒ)</label>
                    <input type="text" id="prefix" data-i18n-placeholder="prefixPlaceholder">
                </div>

                <div class="form-group">
                    <label data-i18n="honorific">í˜¸ì¹­ (ì„ íƒ)</label>
                    <input type="text" id="honorific" data-i18n-placeholder="honorificPlaceholder">
                </div>

                <div class="form-group">
                    <label data-i18n="gameNameUse">ê²Œì„ ëª… - ì‚¬ìš©í•  ëª…ì¹­ (ì„ íƒ)</label>
                    <input type="text" id="gameName" data-i18n-placeholder="gameNameUsePlaceholder">
                </div>

                <div class="form-group">
                    <label data-i18n="suffix">ë§ºìŒë§ (ì„ íƒ)</label>
                    <input type="text" id="suffix" data-i18n-placeholder="suffixPlaceholder">
                </div>

                <div class="form-group">
                    <label data-i18n="tone">ë‹µë³€ í†¤ì•¤ë§¤ë„ˆ</label>
                    <select id="tone">
                        <option value="friendly" data-i18n="toneFriendly">ì¹œê·¼í•˜ê³  ë”°ëœ»í•œ í†¤</option>
                        <option value="professional" data-i18n="toneProfessional">ì „ë¬¸ì ì´ê³  ì •ì¤‘í•œ í†¤</option>
                        <option value="casual" data-i18n="toneCasual">ìºì£¼ì–¼í•˜ê³  í¸ì•ˆí•œ í†¤</option>
                        <option value="formal" data-i18n="toneFormal">ê²©ì‹ìˆê³  ê³µì†í•œ í†¤</option>
                    </select>
                </div>

                <div class="form-group">
                    <label data-i18n="additionalGuidelines">ì¶”ê°€ ì‘ì„± ê¸°ì¤€</label>
                    <div class="guidelines-list" id="guidelinesList">
                        <div class="guideline-item">
                            <input type="text" data-i18n-placeholder="guidelinePlaceholder" data-i18n-value="guideline1" value="ê°ì‚¬ í‘œí˜„ í¬í•¨í•˜ê¸°">
                        </div>
                        <div class="guideline-item">
                            <input type="text" data-i18n-placeholder="guidelineAddPlaceholder" data-i18n-value="guideline2" value="ê³ ê°ì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ëŠ” íƒœë„ ë³´ì´ê¸°">
                        </div>
                    </div>
                    <button class="add-btn" onclick="addGuideline()" data-i18n="addGuidelineBtn">+ ê¸°ì¤€ ì¶”ê°€</button>
                </div>
            </div>
        </div>

        <div style="padding: 0 30px 30px;">
            <button class="generate-btn" onclick="generateReply()" id="generateBtn" data-i18n="generateBtn">
                ğŸ’¬ ëŒ“ê¸€ ì œì•ˆ ìƒì„±í•˜ê¸°
            </button>

            <div class="result-box empty" id="resultBox" data-i18n="resultEmpty">
                ìƒì„±ëœ ëŒ“ê¸€ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
            </div>

            <button class="copy-btn" onclick="copyToClipboard()" id="copyBtn" disabled data-i18n="copyBtn">
                ğŸ“‹ ëŒ“ê¸€ ë³µì‚¬í•˜ê¸°
            </button>
        </div>
    </div>

    <div class="toast" id="toast" data-i18n="toastCopied">ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

    <script>
        let selectedRating = null;
        let currentLanguage = 'ko';

        // ë‹¤êµ­ì–´ ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                title: 'ğŸ“ ê²Œì„ ìŠ¤í† ì–´ ë¦¬ë·° ëŒ“ê¸€ ì‘ì„± ë„ìš°ë¯¸',
                subtitle: 'ë¦¬ë·° ë‚´ìš©ê³¼ ì‘ì„± ê¸°ì¤€ì„ ì…ë ¥í•˜ë©´ ì ì ˆí•œ ëŒ“ê¸€ì„ ìë™ìœ¼ë¡œ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤',
                reviewInfo: 'ë¦¬ë·° ì •ë³´',
                rating: 'ë¦¬ë·° í‰ì ',
                reviewContent: 'ë¦¬ë·° ë‚´ìš©',
                reviewContentPlaceholder: 'ê³ ê°ì´ ë‚¨ê¸´ ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...',
                gameNameRef: 'ê²Œì„ ëª… - ì°¸ê³ ìš© (ì„ íƒ)',
                gameNameRefPlaceholder: 'ì˜ˆ: ë°°í‹€ê·¸ë¼ìš´ë“œ ëª¨ë°”ì¼ (ë¦¬ë·° ëŒ€ìƒ ê²Œì„)',
                writingGuidelines: 'ì‘ì„± ê¸°ì¤€ ì„¤ì •',
                prefix: 'ë§ë¨¸ë¦¬ (ì„ íƒ)',
                prefixPlaceholder: 'ì˜ˆ: ì•ˆë…•í•˜ì„¸ìš” ê³ ê°ë‹˜',
                honorific: 'í˜¸ì¹­ (ì„ íƒ)',
                honorificPlaceholder: 'ì˜ˆ: ê³ ê°ë‹˜, ìœ ì €ë‹˜, í”Œë ˆì´ì–´ë‹˜, ë“±',
                gameNameUse: 'ê²Œì„ ëª… - ì‚¬ìš©í•  ëª…ì¹­ (ì„ íƒ)',
                gameNameUsePlaceholder: 'ì…ë ¥ ì‹œ ëŒ“ê¸€ì— ë°˜ë“œì‹œ ì´ ë‹¨ì–´ë¥¼ ì‚¬ìš©',
                suffix: 'ë§ºìŒë§ (ì„ íƒ)',
                suffixPlaceholder: 'ì˜ˆ: ê°ì‚¬í•©ë‹ˆë‹¤, ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”, ë“±',
                tone: 'ë‹µë³€ í†¤ì•¤ë§¤ë„ˆ',
                toneFriendly: 'ì¹œê·¼í•˜ê³  ë”°ëœ»í•œ í†¤',
                toneProfessional: 'ì „ë¬¸ì ì´ê³  ì •ì¤‘í•œ í†¤',
                toneCasual: 'ìºì£¼ì–¼í•˜ê³  í¸ì•ˆí•œ í†¤',
                toneFormal: 'ê²©ì‹ìˆê³  ê³µì†í•œ í†¤',
                additionalGuidelines: 'ì¶”ê°€ ì‘ì„± ê¸°ì¤€',
                guidelinePlaceholder: 'ì˜ˆ: êµ¬ì²´ì ì¸ ê°œì„  ì‚¬í•­ì´ ìˆìœ¼ë©´ ì–¸ê¸‰í•˜ê¸°',
                guideline1: 'ê°ì‚¬ í‘œí˜„ í¬í•¨í•˜ê¸°',
                guideline2: 'ê³ ê°ì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ëŠ” íƒœë„ ë³´ì´ê¸°',
                guidelineAddPlaceholder: 'ì¶”ê°€ ê¸°ì¤€ ì…ë ¥...',
                addGuidelineBtn: '+ ê¸°ì¤€ ì¶”ê°€',
                generateBtn: 'ğŸ’¬ ëŒ“ê¸€ ì œì•ˆ ìƒì„±í•˜ê¸°',
                resultEmpty: 'ìƒì„±ëœ ëŒ“ê¸€ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤',
                copyBtn: 'ğŸ“‹ ëŒ“ê¸€ ë³µì‚¬í•˜ê¸°',
                toastCopied: 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!',
                alertReviewContent: 'ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                generating: 'ìƒì„± ì¤‘...',
                aiGenerating: 'ğŸ’­ AIê°€ ìµœì ì˜ ëŒ“ê¸€ì„ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...',
                errorMessage: 'âŒ ëŒ“ê¸€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
                deleteBtn: 'ì‚­ì œ'
            },
            en: {
                title: 'ğŸ“ Game Store Review Reply Assistant',
                subtitle: 'Enter review details and writing guidelines to automatically generate appropriate replies',
                reviewInfo: 'Review Information',
                rating: 'Review Rating',
                reviewContent: 'Review Content',
                reviewContentPlaceholder: 'Enter the customer review content...',
                gameNameRef: 'Game Name - Reference (Optional)',
                gameNameRefPlaceholder: 'e.g., PUBG Mobile (Game being reviewed)',
                writingGuidelines: 'Writing Guidelines',
                prefix: 'Opening (Optional)',
                prefixPlaceholder: 'e.g., Hello valued customer',
                honorific: 'Title (Optional)',
                honorificPlaceholder: 'e.g., Customer, User, Player, etc.',
                gameNameUse: 'Game Name - Term to Use (Optional)',
                gameNameUsePlaceholder: 'This term will be used in the reply',
                suffix: 'Closing (Optional)',
                suffixPlaceholder: 'e.g., Thank you, Have a great day, etc.',
                tone: 'Reply Tone',
                toneFriendly: 'Friendly and warm tone',
                toneProfessional: 'Professional and polite tone',
                toneCasual: 'Casual and comfortable tone',
                toneFormal: 'Formal and respectful tone',
                additionalGuidelines: 'Additional Guidelines',
                guidelinePlaceholder: 'e.g., Mention specific improvements if any',
                guideline1: 'Include expressions of gratitude',
                guideline2: 'Show attitude of listening to customer feedback',
                guidelineAddPlaceholder: 'Enter additional guideline...',
                addGuidelineBtn: '+ Add Guideline',
                generateBtn: 'ğŸ’¬ Generate Reply Suggestion',
                resultEmpty: 'Generated reply will appear here',
                copyBtn: 'ğŸ“‹ Copy Reply',
                toastCopied: 'Copied!',
                alertReviewContent: 'Please enter review content.',
                generating: 'Generating...',
                aiGenerating: 'ğŸ’­ AI is crafting the optimal reply...',
                errorMessage: 'âŒ An error occurred while generating the reply. Please try again.',
                deleteBtn: 'Delete'
            },
            ja: {
                title: 'ğŸ“ ã‚²ãƒ¼ãƒ ã‚¹ãƒˆã‚¢ãƒ¬ãƒ“ãƒ¥ãƒ¼è¿”ä¿¡ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ',
                subtitle: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ã¨ä½œæˆåŸºæº–ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€é©åˆ‡ãªè¿”ä¿¡ã‚’è‡ªå‹•çš„ã«ææ¡ˆã—ã¾ã™',
                reviewInfo: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼æƒ…å ±',
                rating: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼è©•ä¾¡',
                reviewContent: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹',
                reviewContentPlaceholder: 'ãŠå®¢æ§˜ãŒæ®‹ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...',
                gameNameRef: 'ã‚²ãƒ¼ãƒ å - å‚è€ƒç”¨ï¼ˆä»»æ„ï¼‰',
                gameNameRefPlaceholder: 'ä¾‹ï¼šPUBG Mobileï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ã‚²ãƒ¼ãƒ ï¼‰',
                writingGuidelines: 'ä½œæˆåŸºæº–è¨­å®š',
                prefix: 'æ›¸ãå‡ºã—ï¼ˆä»»æ„ï¼‰',
                prefixPlaceholder: 'ä¾‹ï¼šãŠå®¢æ§˜ã€ã“ã‚“ã«ã¡ã¯',
                honorific: 'æ•¬ç§°ï¼ˆä»»æ„ï¼‰',
                honorificPlaceholder: 'ä¾‹ï¼šãŠå®¢æ§˜ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§˜ãªã©',
                gameNameUse: 'ã‚²ãƒ¼ãƒ å - ä½¿ç”¨ã™ã‚‹åç§°ï¼ˆä»»æ„ï¼‰',
                gameNameUsePlaceholder: 'å…¥åŠ›æ™‚ã€è¿”ä¿¡ã«å¿…ãšã“ã®è¨€è‘‰ã‚’ä½¿ç”¨',
                suffix: 'çµã³ï¼ˆä»»æ„ï¼‰',
                suffixPlaceholder: 'ä¾‹ï¼šã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€è‰¯ã„ä¸€æ—¥ã‚’ãªã©',
                tone: 'è¿”ä¿¡ãƒˆãƒ¼ãƒ³',
                toneFriendly: 'è¦ªã—ã¿ã‚„ã™ãæ¸©ã‹ã„ãƒˆãƒ¼ãƒ³',
                toneProfessional: 'å°‚é–€çš„ã§ä¸å¯§ãªãƒˆãƒ¼ãƒ³',
                toneCasual: 'ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã§æ°—è»½ãªãƒˆãƒ¼ãƒ³',
                toneFormal: 'æ ¼å¼ã°ã£ãŸä¸å¯§ãªãƒˆãƒ¼ãƒ³',
                additionalGuidelines: 'è¿½åŠ ä½œæˆåŸºæº–',
                guidelinePlaceholder: 'ä¾‹ï¼šå…·ä½“çš„ãªæ”¹å–„äº‹é …ãŒã‚ã‚Œã°è¨€åŠã™ã‚‹',
                guideline1: 'æ„Ÿè¬ã®è¡¨ç¾ã‚’å«ã‚ã‚‹',
                guideline2: 'ãŠå®¢æ§˜ã®æ„è¦‹ã‚’å‚¾è´ã™ã‚‹æ…‹åº¦ã‚’ç¤ºã™',
                guidelineAddPlaceholder: 'è¿½åŠ åŸºæº–ã‚’å…¥åŠ›...',
                addGuidelineBtn: '+ åŸºæº–è¿½åŠ ',
                generateBtn: 'ğŸ’¬ è¿”ä¿¡ææ¡ˆã‚’ç”Ÿæˆ',
                resultEmpty: 'ç”Ÿæˆã•ã‚ŒãŸè¿”ä¿¡ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™',
                copyBtn: 'ğŸ“‹ è¿”ä¿¡ã‚’ã‚³ãƒ”ãƒ¼',
                toastCopied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
                alertReviewContent: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
                generating: 'ç”Ÿæˆä¸­...',
                aiGenerating: 'ğŸ’­ AIãŒæœ€é©ãªè¿”ä¿¡ã‚’ä½œæˆã—ã¦ã„ã¾ã™...',
                errorMessage: 'âŒ è¿”ä¿¡ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚',
                deleteBtn: 'å‰Šé™¤'
            }
        };

        // ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // ì–¸ì–´ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });

            // ëª¨ë“  ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('reviewContent').value = '';
            document.getElementById('productName').value = '';
            document.getElementById('prefix').value = '';
            document.getElementById('honorific').value = '';
            document.getElementById('gameName').value = '';
            document.getElementById('suffix').value = '';
            document.getElementById('tone').selectedIndex = 0;
            
            // í‰ì  ì„ íƒ ì´ˆê¸°í™”
            selectedRating = null;
            document.querySelectorAll('.rating-option').forEach(opt => opt.classList.remove('active'));
            
            // ê²°ê³¼ ë°•ìŠ¤ ì´ˆê¸°í™”
            const resultBox = document.getElementById('resultBox');
            resultBox.classList.add('empty');
            document.getElementById('copyBtn').disabled = true;

            // ê°€ì´ë“œë¼ì¸ ëª©ë¡ ì´ˆê¸°í™” ë° ê¸°ë³¸ 2ê°œ ì„¤ì •
            const guidelinesList = document.getElementById('guidelinesList');
            guidelinesList.innerHTML = `
                <div class="guideline-item">
                    <input type="text" data-i18n-placeholder="guidelinePlaceholder" data-i18n-value="guideline1">
                </div>
                <div class="guideline-item">
                    <input type="text" data-i18n-placeholder="guidelineAddPlaceholder" data-i18n-value="guideline2">
                </div>
            `;

            // ëª¨ë“  í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.dataset.i18n;
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // placeholder ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.dataset.i18nPlaceholder;
                if (translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });

            // value ì—…ë°ì´íŠ¸ (ì´ˆê¸° ê°€ì´ë“œë¼ì¸)
            document.querySelectorAll('[data-i18n-value]').forEach(element => {
                const key = element.dataset.i18nValue;
                if (translations[lang][key]) {
                    element.value = translations[lang][key];
                }
            });

            // select ì˜µì…˜ ì—…ë°ì´íŠ¸
            document.querySelectorAll('#tone option').forEach(option => {
                const key = option.dataset.i18n;
                if (translations[lang][key]) {
                    option.textContent = translations[lang][key];
                }
            });

            // ê²°ê³¼ ë°•ìŠ¤ empty í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            resultBox.textContent = translations[lang].resultEmpty;
        }

        // í‰ì  ì„ íƒ
        document.querySelectorAll('.rating-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.rating-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                selectedRating = this.dataset.rating;
            });
        });

        // ê¸°ì¤€ ì¶”ê°€
        function addGuideline() {
            const list = document.getElementById('guidelinesList');
            const item = document.createElement('div');
            item.className = 'guideline-item';
            item.innerHTML = `
                <input type="text" placeholder="${translations[currentLanguage].guidelineAddPlaceholder}">
                <button class="remove-btn" onclick="removeGuideline(this)">${translations[currentLanguage].deleteBtn}</button>
            `;
            list.appendChild(item);
        }

        // ê¸°ì¤€ ì‚­ì œ
        function removeGuideline(btn) {
            btn.parentElement.remove();
        }

        // ëŒ“ê¸€ ìƒì„±
        async function generateReply() {
            const reviewContent = document.getElementById('reviewContent').value.trim();
            
            if (!reviewContent) {
                alert(translations[currentLanguage].alertReviewContent);
                return;
            }

            const productName = document.getElementById('productName').value.trim();
            const prefix = document.getElementById('prefix').value.trim();
            const honorific = document.getElementById('honorific').value.trim();
            const gameName = document.getElementById('gameName').value.trim();
            const suffix = document.getElementById('suffix').value.trim();
            const tone = document.getElementById('tone').value;
            
            const guidelines = Array.from(document.querySelectorAll('.guideline-item input'))
                .map(input => input.value.trim())
                .filter(val => val);

            const generateBtn = document.getElementById('generateBtn');
            const resultBox = document.getElementById('resultBox');
            const copyBtn = document.getElementById('copyBtn');

            generateBtn.disabled = true;
            generateBtn.textContent = translations[currentLanguage].generating;
            resultBox.innerHTML = `<div class="loading">${translations[currentLanguage].aiGenerating}</div>`;
            resultBox.classList.add('empty');
            copyBtn.disabled = true;

            try {
                // ì–¸ì–´ë³„ í”„ë¡¬í”„íŠ¸ êµ¬ì„±
                let prompt = '';
                const languageMap = {
                    ko: 'í•œêµ­ì–´',
                    en: 'English',
                    ja: 'æ—¥æœ¬èª'
                };

                if (currentLanguage === 'ko') {
                    prompt = `ë‹¹ì‹ ì€ ê²Œì„ ìŠ¤í† ì–´ ë¦¬ë·°ì— ë‹µë³€í•˜ëŠ” ê³ ê° ì‘ëŒ€ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ì ˆí•œ ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.\n\n`;
                } else if (currentLanguage === 'en') {
                    prompt = `You are a customer service expert responding to game store reviews. Please write an appropriate reply based on the following information.\n\n`;
                } else if (currentLanguage === 'ja') {
                    prompt = `ã‚ãªãŸã¯ã‚²ãƒ¼ãƒ ã‚¹ãƒˆã‚¢ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«è¿”ä¿¡ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã®å°‚é–€å®¶ã§ã™ã€‚ä»¥ä¸‹ã®æƒ…å ±ã«åŸºã¥ã„ã¦é©åˆ‡ãªè¿”ä¿¡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚\n\n`;
                }
                
                if (selectedRating) {
                    const ratingLabel = currentLanguage === 'ko' ? 'í‰ì ' : currentLanguage === 'en' ? 'Rating' : 'è©•ä¾¡';
                    const pointLabel = currentLanguage === 'ko' ? 'ì ' : currentLanguage === 'en' ? 'stars' : 'ç‚¹';
                    prompt += `${ratingLabel}: ${selectedRating}${pointLabel}\n`;
                }
                
                const reviewLabel = currentLanguage === 'ko' ? 'ë¦¬ë·° ë‚´ìš©' : currentLanguage === 'en' ? 'Review Content' : 'ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹';
                prompt += `${reviewLabel}: ${reviewContent}\n\n`;
                
                if (productName) {
                    const gameLabel = currentLanguage === 'ko' ? 'ê²Œì„' : currentLanguage === 'en' ? 'Game' : 'ã‚²ãƒ¼ãƒ ';
                    prompt += `${gameLabel}: ${productName}\n\n`;
                }

                const criteriaLabel = currentLanguage === 'ko' ? 'ì‘ì„± ê¸°ì¤€' : currentLanguage === 'en' ? 'Writing Guidelines' : 'ä½œæˆåŸºæº–';
                prompt += `${criteriaLabel}:\n`;
                
                if (prefix) {
                    const prefixLabel = currentLanguage === 'ko' ? 'ë§ë¨¸ë¦¬' : currentLanguage === 'en' ? 'Opening' : 'æ›¸ãå‡ºã—';
                    const startLabel = currentLanguage === 'ko' ? 'ë¡œ ì‹œì‘í•˜ê¸°' : currentLanguage === 'en' ? 'Start with' : 'ã§å§‹ã‚ã‚‹';
                    prompt += `- ${prefixLabel}: "${prefix}"${startLabel}\n`;
                }
                
                if (honorific) {
                    const honorificLabel = currentLanguage === 'ko' ? 'í˜¸ì¹­' : currentLanguage === 'en' ? 'Title' : 'æ•¬ç§°';
                    const addressLabel = currentLanguage === 'ko' ? 'ë¡œ í˜¸ì¹­í•˜ê¸°' : currentLanguage === 'en' ? 'Address customer as' : 'ã¨ã—ã¦å‘¼ã¶';
                    prompt += `- ${honorificLabel}: "${honorific}"${addressLabel}\n`;
                }

                if (gameName) {
                    const gameNameLabel = currentLanguage === 'ko' ? 'ê²Œì„ ëª…' : currentLanguage === 'en' ? 'Game Name' : 'ã‚²ãƒ¼ãƒ å';
                    const includeLabel = currentLanguage === 'ko' ? 'ëŒ“ê¸€ì— ë°˜ë“œì‹œ í¬í•¨í•˜ê¸°' : currentLanguage === 'en' ? 'Must include in reply' : 'è¿”ä¿¡ã«å¿…ãšå«ã‚ã‚‹';
                    prompt += `- ${gameNameLabel}: "${gameName}" ${includeLabel}\n`;
                }
                
                if (suffix) {
                    const suffixLabel = currentLanguage === 'ko' ? 'ë§ºìŒë§' : currentLanguage === 'en' ? 'Closing' : 'çµã³';
                    const endLabel = currentLanguage === 'ko' ? 'ë¡œ ëë‚´ê¸°' : currentLanguage === 'en' ? 'End with' : 'ã§çµ‚ãˆã‚‹';
                    prompt += `- ${suffixLabel}: "${suffix}"${endLabel}\n`;
                }

                const toneMap = {
                    ko: {
                        'friendly': 'ì¹œê·¼í•˜ê³  ë”°ëœ»í•œ í†¤',
                        'professional': 'ì „ë¬¸ì ì´ê³  ì •ì¤‘í•œ í†¤',
                        'casual': 'ìºì£¼ì–¼í•˜ê³  í¸ì•ˆí•œ í†¤',
                        'formal': 'ê²©ì‹ìˆê³  ê³µì†í•œ í†¤'
                    },
                    en: {
                        'friendly': 'Friendly and warm tone',
                        'professional': 'Professional and polite tone',
                        'casual': 'Casual and comfortable tone',
                        'formal': 'Formal and respectful tone'
                    },
                    ja: {
                        'friendly': 'è¦ªã—ã¿ã‚„ã™ãæ¸©ã‹ã„ãƒˆãƒ¼ãƒ³',
                        'professional': 'å°‚é–€çš„ã§ä¸å¯§ãªãƒˆãƒ¼ãƒ³',
                        'casual': 'ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã§æ°—è»½ãªãƒˆãƒ¼ãƒ³',
                        'formal': 'æ ¼å¼ã°ã£ãŸä¸å¯§ãªãƒˆãƒ¼ãƒ³'
                    }
                };
                const toneLabel = currentLanguage === 'ko' ? 'í†¤ì•¤ë§¤ë„ˆ' : currentLanguage === 'en' ? 'Tone' : 'ãƒˆãƒ¼ãƒ³';
                prompt += `- ${toneLabel}: ${toneMap[currentLanguage][tone]}\n`;

                if (guidelines.length > 0) {
                    const additionalLabel = currentLanguage === 'ko' ? 'ì¶”ê°€ ê¸°ì¤€' : currentLanguage === 'en' ? 'Additional Guidelines' : 'è¿½åŠ åŸºæº–';
                    prompt += `- ${additionalLabel}:\n`;
                    guidelines.forEach(g => prompt += `  * ${g}\n`);
                }

                if (currentLanguage === 'ko') {
                    prompt += `\nìœ„ ê¸°ì¤€ì„ ëª¨ë‘ ë°˜ì˜í•˜ì—¬ ê³ ê°ì—ê²Œ ë³´ë‚¼ ëŒ“ê¸€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”. ëŒ“ê¸€ ë‚´ìš©ë§Œ ì‘ì„±í•˜ê³  ë¶€ê°€ ì„¤ëª…ì€ í•˜ì§€ ë§ˆì„¸ìš”.`;
                } else if (currentLanguage === 'en') {
                    prompt += `\nPlease write a reply to the customer in English reflecting all the above guidelines. Write only the reply content without additional explanations.`;
                } else if (currentLanguage === 'ja') {
                    prompt += `\nä¸Šè¨˜ã®åŸºæº–ã‚’ã™ã¹ã¦åæ˜ ã—ã¦ã€ãŠå®¢æ§˜ã¸ã®è¿”ä¿¡ã‚’æ—¥æœ¬èªã§ä½œæˆã—ã¦ãã ã•ã„ã€‚è¿”ä¿¡å†…å®¹ã®ã¿ã‚’ä½œæˆã—ã€è¿½åŠ ã®èª¬æ˜ã¯ã—ãªã„ã§ãã ã•ã„ã€‚`;
                }

                // n8n Webhook í˜¸ì¶œ
                const N8N_WEBHOOK_URL = 'https://komorevee.app.n8n.cloud/webhook/review-reply';
                
                const response = await fetch(N8N_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: prompt
                    })
                });

                const data = await response.json();
                
                if (data.reply) {
                    const generatedReply = data.reply.trim();
                    resultBox.textContent = generatedReply;
                    resultBox.classList.remove('empty');
                    copyBtn.disabled = false;
                } else {
                    throw new Error('ì‘ë‹µ ìƒì„± ì‹¤íŒ¨');
                }

            } catch (error) {
                console.error('Error:', error);
                resultBox.innerHTML = `<div style="color: #dc3545; text-align: center;">${translations[currentLanguage].errorMessage}</div>`;
                resultBox.classList.add('empty');
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = translations[currentLanguage].generateBtn;
            }
        }

        // ë³µì‚¬ ê¸°ëŠ¥
        function copyToClipboard() {
            const resultBox = document.getElementById('resultBox');
            const text = resultBox.textContent;
            
            // ìµœì‹  Clipboard API ì‚¬ìš©
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast();
                }).catch(err => {
                    console.error('Clipboard API failed:', err);
                    // Fallback method
                    fallbackCopyToClipboard(text);
                });
            } else {
                // êµ¬í˜• ë¸Œë¼ìš°ì € fallback
                fallbackCopyToClipboard(text);
            }
        }

        // Fallback ë³µì‚¬ ë©”ì„œë“œ
        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showToast();
            } catch (err) {
                console.error('Fallback copy failed:', err);
                alert(translations[currentLanguage].toastCopied);
            }
            
            document.body.removeChild(textArea);
        }

        // Toast ë©”ì‹œì§€ í‘œì‹œ
        function showToast() {
            const toast = document.getElementById('toast');
            toast.textContent = translations[currentLanguage].toastCopied;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // ì—”í„°í‚¤ë¡œ ìƒì„±
        document.getElementById('reviewContent').addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                generateReply();
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('DOMContentLoaded', function() {
            // ì´ˆê¸° ê°€ì´ë“œë¼ì¸ ê°’ ì„¤ì •
            const guidelineInputs = document.querySelectorAll('.guideline-item input');
            if (guidelineInputs.length >= 2) {
                guidelineInputs[0].value = translations[currentLanguage].guideline1;
                guidelineInputs[1].value = translations[currentLanguage].guideline2;
            }
        });
    </script>
</body>
</html>
